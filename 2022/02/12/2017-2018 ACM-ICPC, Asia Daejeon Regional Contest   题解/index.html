<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
<script src="/live2d-widget/autoload.js"></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.10.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

  <meta name="description" content="这次 Namomo Summer Camp 2021 Day2 模拟选了这场 这场我们队AK了，排名6&#x2F;107 讲个笑话，AK的全是中学生队伍，真正的大学生队伍没有一个AK的&#x2F;youl upd: 把队友写的题也补上了 现在全场题解都有了">
<meta property="og:type" content="website">
<meta property="og:title" content="2017-2018 ACM-ICPC, Asia Daejeon Regional Contest 题解">
<meta property="og:url" content="http://example.com/2022/02/12/2017-2018%20ACM-ICPC,%20Asia%20Daejeon%20Regional%20Contest%20%20%20%E9%A2%98%E8%A7%A3/index.html">
<meta property="og:site_name" content="paulzrm 的小窝">
<meta property="og:description" content="这次 Namomo Summer Camp 2021 Day2 模拟选了这场 这场我们队AK了，排名6&#x2F;107 讲个笑话，AK的全是中学生队伍，真正的大学生队伍没有一个AK的&#x2F;youl upd: 把队友写的题也补上了 现在全场题解都有了">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.luogu.com.cn/upload/image_hosting/7josm485.png">
<meta property="og:image" content="https://cdn.luogu.com.cn/upload/image_hosting/jio4eruy.png">
<meta property="article:published_time" content="2022-02-11T16:00:00.000Z">
<meta property="article:modified_time" content="2022-02-12T14:37:17.481Z">
<meta property="article:author" content="paulzrm">
<meta property="article:tag" content="题解">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.luogu.com.cn/upload/image_hosting/7josm485.png">


<link rel="canonical" href="http://example.com/2022/02/12/2017-2018%20ACM-ICPC,%20Asia%20Daejeon%20Regional%20Contest%20%20%20%E9%A2%98%E8%A7%A3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2022/02/12/2017-2018%20ACM-ICPC,%20Asia%20Daejeon%20Regional%20Contest%20%20%20%E9%A2%98%E8%A7%A3/","path":"2022/02/12/2017-2018 ACM-ICPC, Asia Daejeon Regional Contest   题解/","title":"2017-2018 ACM-ICPC, Asia Daejeon Regional Contest 题解"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>2017-2018 ACM-ICPC, Asia Daejeon Regional Contest 题解 | paulzrm 的小窝</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">paulzrm 的小窝</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#upd-%E6%8A%8A%E9%98%9F%E5%8F%8B%E5%86%99%E7%9A%84%E9%A2%98%E4%B9%9F%E8%A1%A5%E4%B8%8A%E4%BA%86-%E7%8E%B0%E5%9C%A8%E5%85%A8%E5%9C%BA%E9%A2%98%E8%A7%A3%E9%83%BD%E6%9C%89%E4%BA%86"><span class="nav-number">1.</span> <span class="nav-text">upd: 把队友写的题也补上了 现在全场题解都有了</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-A-Broadcast-Stations"><span class="nav-number"></span> <span class="nav-text">Problem A. Broadcast Stations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-B-Connect3"><span class="nav-number"></span> <span class="nav-text">Problem B.Connect3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
#include&lt;bits&#x2F;stdc++.h&gt;
#define ll long long
#define mp make_pair
using namespace std;
bool been[43046888];
int a,b;
inline int getstate(vector&lt;vector&lt;int&gt; &gt;v){
	int rt&#x3D;0;
	for(int i&#x3D;0;i&lt;4;++i)for(int j&#x3D;0;j&lt;4;++j)rt&#x3D;(rt*3)+v[i][j];
	return rt;
}
inline vector&lt;vector&lt;int&gt; &gt;reget(int state){
	vector&lt;vector&lt;int&gt; &gt;v;
	v.resize(4);
	for(int i&#x3D;0;i&lt;4;++i)v[i].resize(4);
	for(int i&#x3D;3;~i;--i)for(int j&#x3D;3;~j;--j)v[i][j]&#x3D;state%3,state&#x2F;&#x3D;3;
	return v;
}
int ans;
inline int win(vector&lt;vector&lt;int&gt; &gt;v){
	for(int i&#x3D;0;i&lt;4;++i){
		if(v[i][0]&#x3D;&#x3D;1 and v[i][1]&#x3D;&#x3D;1 and v[i][2]&#x3D;&#x3D;1)return 1;
		if(v[i][0]&#x3D;&#x3D;2 and v[i][1]&#x3D;&#x3D;2 and v[i][2]&#x3D;&#x3D;2)return 2;
		if(v[i][3]&#x3D;&#x3D;1 and v[i][1]&#x3D;&#x3D;1 and v[i][2]&#x3D;&#x3D;1)return 1;
		if(v[i][3]&#x3D;&#x3D;2 and v[i][1]&#x3D;&#x3D;2 and v[i][2]&#x3D;&#x3D;2)return 2;
	}
	
	for(int j&#x3D;0;j&lt;4;++j){
		if(v[0][j]&#x3D;&#x3D;1 and v[1][j]&#x3D;&#x3D;1 and v[2][j]&#x3D;&#x3D;1)return 1;
		if(v[0][j]&#x3D;&#x3D;2 and v[1][j]&#x3D;&#x3D;2 and v[2][j]&#x3D;&#x3D;2)return 2;
		if(v[3][j]&#x3D;&#x3D;1 and v[1][j]&#x3D;&#x3D;1 and v[2][j]&#x3D;&#x3D;1)return 1;
		if(v[3][j]&#x3D;&#x3D;2 and v[1][j]&#x3D;&#x3D;2 and v[2][j]&#x3D;&#x3D;2)return 2;
	}
	
	if(v[0][0]&#x3D;&#x3D;1 and v[1][1]&#x3D;&#x3D;1 and v[2][2]&#x3D;&#x3D;1)return 1;
	if(v[0][0]&#x3D;&#x3D;2 and v[1][1]&#x3D;&#x3D;2 and v[2][2]&#x3D;&#x3D;2)return 2;
	if(v[3][3]&#x3D;&#x3D;1 and v[1][1]&#x3D;&#x3D;1 and v[2][2]&#x3D;&#x3D;1)return 1;
	if(v[3][3]&#x3D;&#x3D;2 and v[1][1]&#x3D;&#x3D;2 and v[2][2]&#x3D;&#x3D;2)return 2;
	if(v[1][0]&#x3D;&#x3D;1 and v[2][1]&#x3D;&#x3D;1 and v[3][2]&#x3D;&#x3D;1)return 1;
	if(v[1][0]&#x3D;&#x3D;2 and v[2][1]&#x3D;&#x3D;2 and v[3][2]&#x3D;&#x3D;2)return 2;
	if(v[0][1]&#x3D;&#x3D;1 and v[1][2]&#x3D;&#x3D;1 and v[2][3]&#x3D;&#x3D;1)return 1;
	if(v[0][1]&#x3D;&#x3D;2 and v[1][2]&#x3D;&#x3D;2 and v[2][3]&#x3D;&#x3D;2)return 2;
	
	if(v[0][2]&#x3D;&#x3D;1 and v[1][1]&#x3D;&#x3D;1 and v[2][0]&#x3D;&#x3D;1)return 1;
	if(v[0][2]&#x3D;&#x3D;2 and v[1][1]&#x3D;&#x3D;2 and v[2][0]&#x3D;&#x3D;2)return 2;
	if(v[1][3]&#x3D;&#x3D;1 and v[2][2]&#x3D;&#x3D;1 and v[3][1]&#x3D;&#x3D;1)return 1;
	if(v[1][3]&#x3D;&#x3D;2 and v[2][2]&#x3D;&#x3D;2 and v[3][1]&#x3D;&#x3D;2)return 2;
	if(v[0][3]&#x3D;&#x3D;1 and v[1][2]&#x3D;&#x3D;1 and v[2][1]&#x3D;&#x3D;1)return 1;
	if(v[0][3]&#x3D;&#x3D;2 and v[1][2]&#x3D;&#x3D;2 and v[2][1]&#x3D;&#x3D;2)return 2;
	if(v[3][0]&#x3D;&#x3D;1 and v[1][2]&#x3D;&#x3D;1 and v[2][1]&#x3D;&#x3D;1)return 1;
	if(v[3][0]&#x3D;&#x3D;2 and v[1][2]&#x3D;&#x3D;2 and v[2][1]&#x3D;&#x3D;2)return 2;
	
	return 0;
}
inline void dfs(int state,int turn){
	if(been[state])return;
	been[state]&#x3D;1;
	vector&lt;vector&lt;int&gt; &gt;v&#x3D;reget(state);
	if(win(v)&#x3D;&#x3D;1)return;	
	if(v[a][b]){
		if(turn&#x3D;&#x3D;1 and v[a][b]&#x3D;&#x3D;2 and win(v)&#x3D;&#x3D;2){
			++ans;
&#x2F;&#x2F;			cerr&lt;&lt;&quot;---------------------------\n&quot;;
&#x2F;&#x2F;			for(int i&#x3D;0;i&lt;4;++i){
&#x2F;&#x2F;				for(int j&#x3D;0;j&lt;4;++j)cerr&lt;&lt;v[i][j]&lt;&lt;&#39; &#39;;
&#x2F;&#x2F;				cerr&lt;&lt;&#39;\n&#39;;
&#x2F;&#x2F;			}		
		}	
		return;
	}
	if(win(v)&#x3D;&#x3D;2)return;
	for(int i&#x3D;0;i&lt;4;++i){
		for(int j&#x3D;0;j&lt;4;++j){
			if(v[i][j]&#x3D;&#x3D;0){
				v[i][j]&#x3D;turn;
				dfs(getstate(v),3-turn);
				v[i][j]&#x3D;0;
				break;
			}
		}
	}
}
inline void solve(){ 
	int x;
	cin&gt;&gt;x&gt;&gt;a&gt;&gt;b;
	--x,--a,--b;
	swap(a,b);
	vector&lt;vector&lt;int&gt; &gt;v;
	v.resize(4);
	for(int i&#x3D;0;i&lt;4;++i)v[i].resize(4);
	v[x][0]&#x3D;1;
	dfs(getstate(v),2);
	cout&lt;&lt;ans&lt;&lt;&#39;\n&#39;;
}
int main(){
	ios_base::sync_with_stdio(false);
	cin.tie(0),cout.tie(0);
	int T;T&#x3D;1;
&#x2F;&#x2F;	cin&gt;&gt;T;
	for(;T--;)solve();
}
</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-C-Game-Map"><span class="nav-number"></span> <span class="nav-text">Problem C.Game Map</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-D-Happy-Number"><span class="nav-number"></span> <span class="nav-text">Problem D.Happy Number</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#-1"><span class="nav-number"></span> <span class="nav-text">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
#include&lt;bits&#x2F;stdc++.h&gt;
#define ll long long
#define mp make_pair
using namespace std;
map&lt;ll,int&gt;used;
inline void solve(){
	ll n;
	cin&gt;&gt;n;
	while(1){
		ll t&#x3D;0;
		for(;n;){
			t+&#x3D;(n%10)*(n%10);
			n&#x2F;&#x3D;10;
		}
		if(t&#x3D;&#x3D;1){
			cout&lt;&lt;&quot;HAPPY\n&quot;;
			return;
		}
		if(used[t]){
			cout&lt;&lt;&quot;UNHAPPY\n&quot;;
			return;
		}
		n&#x3D;t;
		used[t]&#x3D;1;
	}
}
int main(){
	ios_base::sync_with_stdio(false);
	cin.tie(0),cout.tie(0);
	int T;T&#x3D;1;
&#x2F;&#x2F;	cin&gt;&gt;T;
	for(;T--;)solve();
}
</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-E-How-Many-to-Be-Happy"><span class="nav-number"></span> <span class="nav-text">Problem E.How Many to Be Happy?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-F-Philosopher%E2%80%99s-Walk"><span class="nav-number"></span> <span class="nav-text">Problem F.Philosopher’s Walk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#-2"><span class="nav-number"></span> <span class="nav-text">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
#include&lt;bits&#x2F;stdc++.h&gt;
#define ll long long
#define mp make_pair
using namespace std;
inline pair&lt;int,int&gt; dfs(ll n,ll k){
	if(k&#x3D;&#x3D;0)return mp(0,0);
	int per&#x3D;n*n&#x2F;4;
	int t&#x3D;k&#x2F;per,res&#x3D;k%per;
	pair&lt;int,int&gt; p&#x3D;dfs(n&gt;&gt;1,res);
	if(t&#x3D;&#x3D;0){
		swap(p.first,p.second);
		return p;
	}
	if(t&#x3D;&#x3D;1){
		p.second+&#x3D;n&gt;&gt;1;
		return p;
	}
	if(t&#x3D;&#x3D;2){
		p.first+&#x3D;n&gt;&gt;1;
		p.second+&#x3D;n&gt;&gt;1;
		return p;
	}
	if(t&#x3D;&#x3D;3){
		swap(p.first,p.second);
		p.first&#x3D;n-1-p.first;
		p.second&#x3D;(n&gt;&gt;1)-1-p.second;
		return p;
	}
}
inline void solve(){
	int n,k;
	cin&gt;&gt;n&gt;&gt;k;
	pair&lt;int,int&gt; ans&#x3D;dfs(n,k-1);
	cout&lt;&lt;ans.first+1&lt;&lt;&#39; &#39;&lt;&lt;ans.second+1&lt;&lt;&#39;\n&#39;;
}
int main(){
	ios_base::sync_with_stdio(false);
	cin.tie(0),cout.tie(0);
	int T;T&#x3D;1;
&#x2F;&#x2F;	cin&gt;&gt;T;
	for(;T--;)solve();
}
</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-G-Rectilinear-Regions"><span class="nav-number"></span> <span class="nav-text">Problem G.Rectilinear Regions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-H-Rock-Paper-Scissors"><span class="nav-number"></span> <span class="nav-text">Problem H.Rock Paper Scissors</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-I-Slot-Machines"><span class="nav-number"></span> <span class="nav-text">Problem I.Slot Machines</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-J-Strongly-Matchable"><span class="nav-number"></span> <span class="nav-text">Problem J.Strongly Matchable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-K-Untangling-Chain"><span class="nav-number"></span> <span class="nav-text">Problem K.Untangling Chain</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem-L-Vacation-Plans"><span class="nav-number"></span> <span class="nav-text">Problem L.Vacation Plans</span></a></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">paulzrm</p>
  <div class="site-description" itemprop="description">一个存一些奇奇怪怪的东西的地方</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/12/2017-2018%20ACM-ICPC,%20Asia%20Daejeon%20Regional%20Contest%20%20%20%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="paulzrm">
      <meta itemprop="description" content="一个存一些奇奇怪怪的东西的地方">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="paulzrm 的小窝">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          2017-2018 ACM-ICPC, Asia Daejeon Regional Contest 题解
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-02-12 00:00:00 / Modified: 22:37:17" itemprop="dateCreated datePublished" datetime="2022-02-12T00:00:00+08:00">2022-02-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>这次 Namomo Summer Camp 2021 Day2 模拟选了这场</p>
<p>这场我们队AK了，排名6/107</p>
<p>讲个笑话，AK的全是中学生队伍，真正的大学生队伍没有一个AK的/youl</p>
<h3 id="upd-把队友写的题也补上了-现在全场题解都有了"><a href="#upd-把队友写的题也补上了-现在全场题解都有了" class="headerlink" title="upd: 把队友写的题也补上了 现在全场题解都有了"></a>upd: 把队友写的题也补上了 现在全场题解都有了</h3><span id="more"></span>
<h2 id="Problem-A-Broadcast-Stations"><a href="#Problem-A-Broadcast-Stations" class="headerlink" title="Problem A. Broadcast Stations"></a>Problem A. Broadcast Stations</h2><p>通过队伍数：12/107</p>
<p>队友口述做法我写掉了</p>
<p>4h58min 通过，全场所有提交中最后一个AC记录/youl</p>
<p>题目大意：</p>
<p>有一棵 $n \le 5000$ 个节点的树。你可以对每一个节点赋上一个权值。</p>
<p>假设对于第 $i$ 个节点，权值赋为 $x_i$，那么这个节点可以“覆盖”到所有与它距离不超过 $x_i$ 的点。问你要使得这棵树上所有点都被覆盖到的所有点的总权值是多少。</p>
<p>解法：</p>
<p>考虑树形dp。</p>
<p>令 $f_{i,j}$ 表示考虑到以 $i$ 为根的子树，子树中选择的权值最大能够影响到$i$ 的 $j$ 辈祖先的最小的权值。</p>
<p>然后发现不方便转移</p>
<p>再设 $g_{i,j}$ 表示考虑到以i为根的子树 $j$ 层以下的都能被覆盖的最小代价。</p>
<p>然后我们就可以愉快的推出转移方程了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize (2)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> G++ optimize (2)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize (3)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> G++ optimize (3)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mxn=<span class="number">5005</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;G[mxn];</span><br><span class="line"><span class="type">int</span> f[mxn][mxn];<span class="comment">//f[i][j]表示考虑到以i为根的子树 向上覆盖k层的最小代价 </span></span><br><span class="line"><span class="type">int</span> g[mxn][mxn];<span class="comment">//g[i][j]表示考虑到以i为根的子树 j层以下的都能被覆盖的最小代价 </span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa=<span class="number">0</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;++i)f[u][i]=g[u][i]=n;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;sum;sum.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n+<span class="number">1</span>;++i)sum.<span class="built_in">push_back</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;G[u].<span class="built_in">size</span>();++i)&#123;</span><br><span class="line">		<span class="type">int</span> v=G[u][i];</span><br><span class="line">		<span class="keyword">if</span>(v==fa)<span class="keyword">continue</span>;</span><br><span class="line">		<span class="built_in">dfs</span>(v,u);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=n;++j)sum[j]+=g[v][j];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;G[u].<span class="built_in">size</span>();++i)&#123;    <span class="comment">//让子树中的一个能够覆盖到节点u</span></span><br><span class="line">		<span class="type">int</span> v=G[u][i];</span><br><span class="line">		<span class="keyword">if</span>(v==fa)<span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;++j)f[u][j]=<span class="built_in">min</span>(f[u][j],f[v][j+<span class="number">1</span>]+sum[j]-g[v][j]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)f[u][i]=<span class="built_in">min</span>(f[u][i],sum[i]+i);<span class="comment">//自己赋上权值</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">-1</span>;i&gt;=<span class="number">0</span>;--i)f[u][i]=<span class="built_in">min</span>(f[u][i],f[u][i+<span class="number">1</span>]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)g[u][i]=<span class="built_in">min</span>(g[u][i],sum[i<span class="number">-1</span>]);  <span class="comment">//根据定义</span></span><br><span class="line">	g[u][<span class="number">0</span>]=f[u][<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)g[u][i]=<span class="built_in">min</span>(g[u][i],g[u][i<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="type">int</span> a,b;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">		G[a].<span class="built_in">push_back</span>(b);</span><br><span class="line">		G[b].<span class="built_in">push_back</span>(a);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,f[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-B-Connect3"><a href="#Problem-B-Connect3" class="headerlink" title="Problem B.Connect3"></a>Problem B.Connect3</h2><p>通过队伍数：53/107</p>
<p>题目大意：</p>
<p>有一个 $4 * 4$ 的棋盘。黑白两个人轮流操作。每个人每一次可以选择一列，然后在这一列行最小的地方放上他对应的棋子。如果一个人有 $3$ 个棋子在横或竖或斜上连在了一起，那么他就赢了，游戏结束。黑先白后。</p>
<p>现在告诉你黑棋第一步走了 $(1,x)$，白棋最后一步走了 $(a,b)$ 且在这一步后赢了，问你最终的局面所有可能的转态的总数。</p>
<p>题解：</p>
<p>直接爆搜</p>
<p>写了份屎山代码莽过去了</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">bool</span> been[<span class="number">43046888</span>];</span><br><span class="line"><span class="type">int</span> a,b;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">getstate</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt; &gt;v)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> rt=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">4</span>;++j)rt=(rt*<span class="number">3</span>)+v[i][j];</span><br><span class="line">	<span class="keyword">return</span> rt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">inline</span> vector&lt;vector&lt;<span class="type">int</span>&gt; &gt;<span class="built_in">reget</span>(<span class="type">int</span> state)&#123;</span><br><span class="line">	vector&lt;vector&lt;<span class="type">int</span>&gt; &gt;v;</span><br><span class="line">	v.<span class="built_in">resize</span>(<span class="number">4</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)v[i].<span class="built_in">resize</span>(<span class="number">4</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>;~i;--i)<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">3</span>;~j;--j)v[i][j]=state%<span class="number">3</span>,state/=<span class="number">3</span>;</span><br><span class="line">	<span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">win</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt; &gt;v)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(v[i][<span class="number">0</span>]==<span class="number">1</span> <span class="keyword">and</span> v[i][<span class="number">1</span>]==<span class="number">1</span> <span class="keyword">and</span> v[i][<span class="number">2</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(v[i][<span class="number">0</span>]==<span class="number">2</span> <span class="keyword">and</span> v[i][<span class="number">1</span>]==<span class="number">2</span> <span class="keyword">and</span> v[i][<span class="number">2</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(v[i][<span class="number">3</span>]==<span class="number">1</span> <span class="keyword">and</span> v[i][<span class="number">1</span>]==<span class="number">1</span> <span class="keyword">and</span> v[i][<span class="number">2</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(v[i][<span class="number">3</span>]==<span class="number">2</span> <span class="keyword">and</span> v[i][<span class="number">1</span>]==<span class="number">2</span> <span class="keyword">and</span> v[i][<span class="number">2</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">4</span>;++j)&#123;</span><br><span class="line">		<span class="keyword">if</span>(v[<span class="number">0</span>][j]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][j]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][j]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(v[<span class="number">0</span>][j]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][j]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][j]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(v[<span class="number">3</span>][j]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][j]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][j]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(v[<span class="number">3</span>][j]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][j]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][j]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">0</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">1</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">2</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">0</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">1</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">2</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">3</span>][<span class="number">3</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">1</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">2</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">3</span>][<span class="number">3</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">1</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">2</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">1</span>][<span class="number">0</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">1</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">3</span>][<span class="number">2</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">1</span>][<span class="number">0</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">1</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">3</span>][<span class="number">2</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">1</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">2</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">3</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">1</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">2</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">3</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">2</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">1</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">0</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">2</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">1</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">0</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">1</span>][<span class="number">3</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">2</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">3</span>][<span class="number">1</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">1</span>][<span class="number">3</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">2</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">3</span>][<span class="number">1</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">3</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">2</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">1</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">0</span>][<span class="number">3</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">2</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">1</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">3</span>][<span class="number">0</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">2</span>]==<span class="number">1</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">1</span>]==<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(v[<span class="number">3</span>][<span class="number">0</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">1</span>][<span class="number">2</span>]==<span class="number">2</span> <span class="keyword">and</span> v[<span class="number">2</span>][<span class="number">1</span>]==<span class="number">2</span>)<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> state,<span class="type">int</span> turn)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(been[state])<span class="keyword">return</span>;</span><br><span class="line">	been[state]=<span class="number">1</span>;</span><br><span class="line">	vector&lt;vector&lt;<span class="type">int</span>&gt; &gt;v=<span class="built_in">reget</span>(state);</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">win</span>(v)==<span class="number">1</span>)<span class="keyword">return</span>;	</span><br><span class="line">	<span class="keyword">if</span>(v[a][b])&#123;</span><br><span class="line">		<span class="keyword">if</span>(turn==<span class="number">1</span> <span class="keyword">and</span> v[a][b]==<span class="number">2</span> <span class="keyword">and</span> <span class="built_in">win</span>(v)==<span class="number">2</span>)&#123;</span><br><span class="line">			++ans;</span><br><span class="line"><span class="comment">//			cerr&lt;&lt;&quot;---------------------------\n&quot;;</span></span><br><span class="line"><span class="comment">//			for(int i=0;i&lt;4;++i)&#123;</span></span><br><span class="line"><span class="comment">//				for(int j=0;j&lt;4;++j)cerr&lt;&lt;v[i][j]&lt;&lt;&#x27; &#x27;;</span></span><br><span class="line"><span class="comment">//				cerr&lt;&lt;&#x27;\n&#x27;;</span></span><br><span class="line"><span class="comment">//			&#125;		</span></span><br><span class="line">		&#125;	</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">win</span>(v)==<span class="number">2</span>)<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">4</span>;++j)&#123;</span><br><span class="line">			<span class="keyword">if</span>(v[i][j]==<span class="number">0</span>)&#123;</span><br><span class="line">				v[i][j]=turn;</span><br><span class="line">				<span class="built_in">dfs</span>(<span class="built_in">getstate</span>(v),<span class="number">3</span>-turn);</span><br><span class="line">				v[i][j]=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123; </span><br><span class="line">	<span class="type">int</span> x;</span><br><span class="line">	cin&gt;&gt;x&gt;&gt;a&gt;&gt;b;</span><br><span class="line">	--x,--a,--b;</span><br><span class="line">	<span class="built_in">swap</span>(a,b);</span><br><span class="line">	vector&lt;vector&lt;<span class="type">int</span>&gt; &gt;v;</span><br><span class="line">	v.<span class="built_in">resize</span>(<span class="number">4</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)v[i].<span class="built_in">resize</span>(<span class="number">4</span>);</span><br><span class="line">	v[x][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">dfs</span>(<span class="built_in">getstate</span>(v),<span class="number">2</span>);</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2><h2 id="Problem-C-Game-Map"><a href="#Problem-C-Game-Map" class="headerlink" title="Problem C.Game Map"></a>Problem C.Game Map</h2><p>通过队伍数：86/107</p>
<p>题目大意：</p>
<p>给你一张无向图。你需要找到一个路径$c_{1\dots len}$ 满足对于所有的$1 \le i &lt; len$ 满足 $nei_{c_i}&lt;nei_{c_{i+1}}$，其中 $nei_i$ 表示 $i$ 号节点的邻居数量。</p>
<p>题解：</p>
<p>签到题2号。</p>
<p>我们考虑记忆化搜索。令 $dp_i$ 表示考虑到当前以 $i$ 号节点为起始点的最长路径的长度是多少。</p>
<p>很显然这是没有后效性的，因为节点 $i$ 能辗转或直接到另一个节点 $j$ 当且仅当$nei_i&lt;nei_j$，就不存在环状转移。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;g[mxn];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> nei[mxn];</span><br><span class="line"><span class="type">int</span> dp[mxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(~dp[x])<span class="keyword">return</span> dp[x];</span><br><span class="line">	dp[x]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;g[x].<span class="built_in">size</span>();++i)&#123;</span><br><span class="line">		<span class="type">int</span> y=g[x][i];</span><br><span class="line">		<span class="keyword">if</span>(nei[y]&gt;nei[x])dp[x]=<span class="built_in">max</span>(dp[x],<span class="built_in">dfs</span>(y)+<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dp[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,u,v;i&lt;=m;++i)&#123;</span><br><span class="line">		cin&gt;&gt;u&gt;&gt;v;</span><br><span class="line">		g[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">		g[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">		++nei[v],++nei[u];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="built_in">sizeof</span>(dp));</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;++i)ans=<span class="built_in">max</span>(ans,<span class="built_in">dfs</span>(i));</span><br><span class="line"><span class="comment">//	for(int i=0;i&lt;n;++i)cerr&lt;&lt;dp[i]&lt;&lt;&#x27; &#x27;;cerr&lt;&lt;&#x27;\n&#x27;;</span></span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-D-Happy-Number"><a href="#Problem-D-Happy-Number" class="headerlink" title="Problem D.Happy Number"></a>Problem D.Happy Number</h2><p>通过队伍数：100/107</p>
<p>真·签到题</p>
<p>给你一个数。</p>
<p>定义一次操作为把一个数 $x$ 变成它每一位上的数字的平方之和。</p>
<p>比如：$114$ 操作一次之后变为 $1^2+1^2+4^2=1+1+16=18$</p>
<p>定义一个数是 <code>Happy Number</code> 当且仅当经过若干次操作后会变为 $1$。</p>
<p>如：$19-&gt;82-&gt;68-&gt;100-&gt;1$</p>
<p>反之，就是 <code>Unhappy Number</code></p>
<p>题目告诉你如果是 <code>Unhappy Number</code> 那一定会陷入一个循环</p>
<p>现在给你一个数 $x \le 10^9$ 让你判断它是不是<code>Happy Number</code></p>
<p>题解：</p>
<p>暴力即可。</p>
<p>虽然 $x\le 10^9$</p>
<p>但一次操作后就 $\le 9 \times 9^2 = 729$</p>
<p>可以发现无论怎么样也不会超过 $10^3$ 了。</p>
<p>然后由于会循环，直接暴力即可。</p>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">map&lt;ll,<span class="type">int</span>&gt;used;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ll n;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		ll t=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(;n;)&#123;</span><br><span class="line">			t+=(n%<span class="number">10</span>)*(n%<span class="number">10</span>);</span><br><span class="line">			n/=<span class="number">10</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(t==<span class="number">1</span>)&#123;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;HAPPY\n&quot;</span>;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(used[t])&#123;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;UNHAPPY\n&quot;</span>;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		n=t;</span><br><span class="line">		used[t]=<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2><h2 id="Problem-E-How-Many-to-Be-Happy"><a href="#Problem-E-How-Many-to-Be-Happy" class="headerlink" title="Problem E.How Many to Be Happy?"></a>Problem E.How Many to Be Happy?</h2><p>通过队伍数：27/107</p>
<p>题目大意：</p>
<p>给你一张 $n$ 点 $m$ 边的带权无向图</p>
<p>令 $H(x):1\le x \le m$ 为让第 $x$ 条边能在最小生成树中最小需要删除的<strong>边数</strong>。</p>
<p>你现在需要求出 $\sum\limits_{i=1}^mH(i)$</p>
<p>$1 \le n \le 100,  1 \le m \le 500$</p>
<p>题解：</p>
<p>我们观察对于第 $i$ 条边（连接 $u_i,v_i$ ，权值为 $w_i$ ），它要在最小生成树中需要满足什么条件。</p>
<p>按照 Kruskal 的思路，按照边权从小到大依次加边。那么所有边权 $\geq w_i$ 的边就没有影响不用考虑了。</p>
<p>然后考虑第 $i$ 条边什么时候能有用：就是在这之前 $u_i,v_i$ 不在一个连通块中。</p>
<p>稍微想一下就相当于在原图中求一个最小割。</p>
<p>以 $u_i$ 为源点，$v_i$ 为汇点，所有权值 $&lt; w_i$ 的边都加上，容量为1。</p>
<p>在这张<strong>无向图</strong>上跑一遍最大流就行了。</p>
<p>注意是<strong>无向图</strong>，在建图的时候正边和反边的容量都是1。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> reg register</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ri register ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ld long double</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> ll mxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,s,t;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;ll to,cap,rev;&#125;;</span><br><span class="line">vector&lt;edge&gt;g[mxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">add_edge</span><span class="params">(ll from,ll to,ll cap)</span></span>&#123;</span><br><span class="line">	g[from].<span class="built_in">push_back</span>((edge)&#123;to,cap,g[to].<span class="built_in">size</span>()&#125;);</span><br><span class="line">	g[to].<span class="built_in">push_back</span>((edge)&#123;from,cap,g[from].<span class="built_in">size</span>()<span class="number">-1</span>&#125;);<span class="comment">//无向图 </span></span><br><span class="line">&#125;</span><br><span class="line">ll iter[mxn],lev[mxn];</span><br><span class="line"><span class="type">const</span> ll inf=<span class="number">21474836477777</span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(lev,<span class="number">-1</span>,<span class="built_in">sizeof</span>(lev));lev[s]=<span class="number">0</span>;</span><br><span class="line">	queue&lt;ll&gt;q;<span class="keyword">for</span>(;q.<span class="built_in">size</span>();)q.<span class="built_in">pop</span>();q.<span class="built_in">push</span>(s);</span><br><span class="line">	<span class="keyword">for</span>(;q.<span class="built_in">size</span>();)&#123;</span><br><span class="line">		ll p=q.<span class="built_in">front</span>();q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;g[p].<span class="built_in">size</span>();++i)&#123;</span><br><span class="line">			edge&amp;e=g[p][i];</span><br><span class="line">			<span class="keyword">if</span>(e.cap&gt;<span class="number">0</span> <span class="keyword">and</span> lev[e.to]&lt;<span class="number">0</span>)&#123;</span><br><span class="line">				lev[e.to]=lev[p]+<span class="number">1</span>;</span><br><span class="line">				q.<span class="built_in">push</span>(e.to);</span><br><span class="line">			&#125;		</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">dfs</span><span class="params">(ll v,ll t,ll f)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(v==t)<span class="keyword">return</span> f;</span><br><span class="line">	<span class="keyword">for</span>(ll&amp;i=iter[v];i&lt;g[v].<span class="built_in">size</span>();++i)&#123;</span><br><span class="line">		edge&amp;e=g[v][i];</span><br><span class="line">		<span class="keyword">if</span>(e.cap&gt;<span class="number">0</span> <span class="keyword">and</span> lev[e.to]&gt;lev[v])&#123;</span><br><span class="line">			ll d=<span class="built_in">dfs</span>(e.to,t,<span class="built_in">min</span>(f,e.cap));</span><br><span class="line">			<span class="keyword">if</span>(d&gt;<span class="number">0</span>)&#123;</span><br><span class="line">				e.cap-=d;</span><br><span class="line">				g[e.to][e.rev].cap+=d;</span><br><span class="line">				<span class="keyword">return</span> d;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">dinic</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ll flow=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(;;)&#123;</span><br><span class="line">		<span class="built_in">bfs</span>();</span><br><span class="line">		<span class="keyword">if</span>(lev[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line">		<span class="built_in">memset</span>(iter,<span class="number">0</span>,<span class="built_in">sizeof</span>(iter));</span><br><span class="line">		ll f=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(;;)&#123;</span><br><span class="line">			f=<span class="built_in">dfs</span>(s,t,inf);</span><br><span class="line">			<span class="keyword">if</span>(!f)<span class="keyword">break</span>;</span><br><span class="line">			flow+=f;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;pair&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;,<span class="type">int</span>&gt; &gt;E;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,u,v,w;i&lt;=m;++i)cin&gt;&gt;u&gt;&gt;v&gt;&gt;w,E.<span class="built_in">push_back</span>(<span class="built_in">mp</span>(<span class="built_in">mp</span>(u,v),w));</span><br><span class="line">	ll ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in">sizeof</span>(g));</span><br><span class="line">		s=E[i].first.first,t=E[i].first.second;</span><br><span class="line">		<span class="type">int</span> f=E[i].second;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;E.<span class="built_in">size</span>();++j)&#123;</span><br><span class="line">			<span class="keyword">if</span>(i==j)<span class="keyword">continue</span>;</span><br><span class="line">			<span class="keyword">if</span>(E[j].second&lt;f)<span class="built_in">add_edge</span>(E[j].first.first,E[j].first.second,<span class="number">1ll</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		ans+=<span class="built_in">dinic</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-F-Philosopher’s-Walk"><a href="#Problem-F-Philosopher’s-Walk" class="headerlink" title="Problem F.Philosopher’s Walk"></a>Problem F.Philosopher’s Walk</h2><p>通过队伍数：74/107</p>
<p>题目大意：</p>
<p>/youl</p>
<p>时间全花在看懂上</p>
<p><img src="https://cdn.luogu.com.cn/upload/image_hosting/7josm485.png" alt=""></p>
<p>这分别是 $1$ 阶 $(n=2)$，$2$ 阶 $(n=4)$ 和 $3$ 阶 $(n=8)$ 的情况。</p>
<p>现在给你 $n$ 是$2^t$ ( $t\le 15$是正整数)和 $k$，让你求出 $t$ 阶图中第 $k$ 个点的位置在哪</p>
<p>解法：</p>
<p>理解题意后可以发现大图是由小图转化而来。</p>
<p>所以我们可以不断的翻折、平移坐标系，从小往大推。</p>
<p>一个基础图形：左下-&gt;左上-&gt;右上-&gt;右下</p>
<p>递归小的后返回大的时考虑如何变化坐标系即可。</p>
<h2 id="-2"><a href="#-2" class="headerlink" title=""></a><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; <span class="title">dfs</span><span class="params">(ll n,ll k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(k==<span class="number">0</span>)<span class="keyword">return</span> <span class="built_in">mp</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> per=n*n/<span class="number">4</span>;</span><br><span class="line">	<span class="type">int</span> t=k/per,res=k%per;</span><br><span class="line">	pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; p=<span class="built_in">dfs</span>(n&gt;&gt;<span class="number">1</span>,res);</span><br><span class="line">	<span class="keyword">if</span>(t==<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">swap</span>(p.first,p.second);</span><br><span class="line">		<span class="keyword">return</span> p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(t==<span class="number">1</span>)&#123;</span><br><span class="line">		p.second+=n&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span> p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(t==<span class="number">2</span>)&#123;</span><br><span class="line">		p.first+=n&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		p.second+=n&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span> p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(t==<span class="number">3</span>)&#123;</span><br><span class="line">		<span class="built_in">swap</span>(p.first,p.second);</span><br><span class="line">		p.first=n<span class="number">-1</span>-p.first;</span><br><span class="line">		p.second=(n&gt;&gt;<span class="number">1</span>)<span class="number">-1</span>-p.second;</span><br><span class="line">		<span class="keyword">return</span> p;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n,k;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">	pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; ans=<span class="built_in">dfs</span>(n,k<span class="number">-1</span>);</span><br><span class="line">	cout&lt;&lt;ans.first+<span class="number">1</span>&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;ans.second+<span class="number">1</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2><h2 id="Problem-G-Rectilinear-Regions"><a href="#Problem-G-Rectilinear-Regions" class="headerlink" title="Problem G.Rectilinear Regions"></a>Problem G.Rectilinear Regions</h2><p>通过队伍数：16/107</p>
<p>题目大意：</p>
<p>给出两条阶梯型的线 $L,U$，求出那些 $U$ 在上，$L$ 在下围成的封闭的多边形的面积的和。</p>
<p><img src="https://cdn.luogu.com.cn/upload/image_hosting/jio4eruy.png" alt=""></p>
<p>题解：</p>
<p>按照题意尺取法模拟。把一个大块分成一个个矩形求面积之和。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mxn=<span class="number">1e6</span>+<span class="number">6</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">	ll x,y,t;</span><br><span class="line">&#125;p[mxn];</span><br><span class="line">ll n,m,nn,mm,lst=<span class="number">-1</span>,pre,k;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span></span>&#123;<span class="keyword">return</span> x.x&lt;y.x;&#125; </span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	cin&gt;&gt;nn;<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;++i)cin&gt;&gt;p[i].x&gt;&gt;p[i].y,p[i].t=<span class="number">0</span>;</span><br><span class="line">	cin&gt;&gt;mm;<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;++i)cin&gt;&gt;p[i+n].x&gt;&gt;p[i+n].y,p[i+n].t=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">sort</span>(p,p+n+m,cmp);</span><br><span class="line">	ll ans=<span class="number">0</span>,cnt=<span class="number">0</span>,sum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(;k&lt;n+m;)&#123;</span><br><span class="line">		<span class="type">int</span> x=p[k].x;</span><br><span class="line">		<span class="type">bool</span> f=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(nn&lt;mm)sum+=(x-pre)*(mm-nn);<span class="comment">//求小块矩形面积之和 注意要先加到sum里，因为要求是封闭的多边形 可能最后一段不合上了</span></span><br><span class="line">		<span class="keyword">else</span> f=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(;k&lt;n+m <span class="keyword">and</span> p[k].x==x;++k)&#123;</span><br><span class="line">			<span class="keyword">if</span>(p[k].t==<span class="number">0</span>)nn=p[k].y;</span><br><span class="line">			<span class="keyword">else</span> mm=p[k].y;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(nn&lt;mm <span class="keyword">and</span> f)lst=x;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(nn&gt;=mm <span class="keyword">and</span> !f)&#123;</span><br><span class="line">			<span class="keyword">if</span>(lst&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">				++cnt;    <span class="comment">//同理 因为要求的是封闭多边形</span></span><br><span class="line">				ans+=sum;		</span><br><span class="line">			&#125;</span><br><span class="line">			sum=<span class="number">0</span>;</span><br><span class="line">			lst=x;</span><br><span class="line">		&#125;</span><br><span class="line">		pre=x;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;cnt&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-H-Rock-Paper-Scissors"><a href="#Problem-H-Rock-Paper-Scissors" class="headerlink" title="Problem H.Rock Paper Scissors"></a>Problem H.Rock Paper Scissors</h2><p>通过队伍数：42/107</p>
<p><del>队友谦虚不会FFT就让我写了orz</del></p>
<p>题目大意：</p>
<p>有两个人玩石头剪刀布。他们的出法可以用两个字符串表示。每一个字符串的字符都为<code>R</code> <code>P</code> 或 <code>S</code>。显然 <code>R</code> 赢 <code>S</code>，<code>S</code> 赢 <code>P</code>，<code>P</code> 赢 <code>R</code>。</p>
<p>已知第一个人的串长度为 $n$，第二个人的串为 $m \le n$。</p>
<p>现在要从第一个人的串 $a$ 中选出一个长度为 $m$ 的子串 $c$ 与 第二个人的串$b$ 打。规则是 $c_i$ 和 $b_i$ 打 $(1 \le i \le m)$。可以发现一共有 $n-m+1$ 种选法。</p>
<p>现在需要最大化第二个人 $(b)$ 赢的局数。输出最多能赢多少局。</p>
<p>题解：</p>
<p><del>这真的是FFT入门题啊</del></p>
<p>我们可以先将 $a$ 中的所有  <code>S -&gt; R</code>，<code>P -&gt; S</code>，<code>R -&gt; P</code>，变为能赢的序列。</p>
<p>然后就是希望最大化 $b$ 与 $a$ 的一个子串重合的个数。</p>
<p><del>这不就是FFT模板了吗</del></p>
<p>对于 <code>RGB</code> 三种字符，我们分开来讨论：</p>
<p>假设现在考虑到 <code>R</code>:</p>
<p>构造两个多项式 $F_R$ 和 $G_R$ 。 如果 $a_i=R$，那么 $F_R$ 中第 $i$ 项的系数就是 $1$。反之就是 $0$。</p>
<p>$G_R$ 同理由 $b$ 得到。</p>
<p>然后将 $F_R$ 和 $G_R$ 相乘 得到一个新多项式 $A_R$</p>
<p>同理得到 $A_P$ 和 $A_S$</p>
<p>然后我们将 $A_R$，$A_P$ 和 $A_S$ 相加得到 $T$。</p>
<p>我们对 $T$ 的 $m+1$ 项开始一直到 $n+m$ 项取 $max$ 即可。（因为需要全部匹配上）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> reg register</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ri register int</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ld double</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mxn=<span class="number">6e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> ld PI=<span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line"><span class="type">int</span> n,m,k,sm;</span><br><span class="line"><span class="type">int</span> rev[mxn];</span><br><span class="line">complex&lt;ld&gt;F1[mxn],G1[mxn],F2[mxn],G2[mxn],F3[mxn],G3[mxn];</span><br><span class="line"><span class="type">int</span> A1[mxn],A2[mxn],A3[mxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">makerev</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line">	ri d=N&gt;&gt;<span class="number">1</span>,p=<span class="number">0</span>;</span><br><span class="line">	rev[p++]=<span class="number">0</span>,rev[p++]=d;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> w=<span class="number">2</span>;w&lt;=N;w&lt;&lt;=<span class="number">1</span>)&#123;</span><br><span class="line">		d&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(ri t=<span class="number">0</span>;t&lt;w;++t)rev[p++]=rev[t]|d;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">FFT</span><span class="params">(complex&lt;ld&gt;*A,<span class="type">int</span> N)</span></span>&#123;    <span class="comment">//FFT板子</span></span><br><span class="line">	<span class="keyword">for</span>(ri i=<span class="number">1</span>;i&lt;N;++i)<span class="keyword">if</span>(rev[i]&gt;i)<span class="built_in">swap</span>(A[rev[i]],A[i]);</span><br><span class="line">	<span class="keyword">for</span>(ri len=<span class="number">2</span>,M=<span class="number">1</span>;len&lt;=N;M=len,len&lt;&lt;=<span class="number">1</span>)&#123;</span><br><span class="line">		complex&lt;ld&gt;<span class="built_in">W</span>(<span class="built_in">cos</span>(PI/M),<span class="built_in">sin</span>(PI/M)),<span class="built_in">w</span>(<span class="number">1.0</span>,<span class="number">0.0</span>);</span><br><span class="line">		<span class="keyword">for</span>(ld L=<span class="number">0</span>,R=len<span class="number">-1</span>;R&lt;=N;L+=len,R+=len)&#123;</span><br><span class="line">			complex&lt;ld&gt;w0=w;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> p=L,lim=L+M;p&lt;lim;++p)&#123;</span><br><span class="line">				complex&lt;ld&gt; x=A[p]+w0*A[p+M],y=A[p]-w0*A[p+M];</span><br><span class="line">				A[p]=x,A[p+M]=y;</span><br><span class="line">				w0*=W;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">string a,b;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m&gt;&gt;a&gt;&gt;b;</span><br><span class="line">	<span class="built_in">reverse</span>(b.<span class="built_in">begin</span>(),b.<span class="built_in">end</span>());</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(a[i]==<span class="string">&#x27;R&#x27;</span>)a[i]=<span class="string">&#x27;P&#x27;</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[i]==<span class="string">&#x27;P&#x27;</span>)a[i]=<span class="string">&#x27;S&#x27;</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[i]==<span class="string">&#x27;S&#x27;</span>)a[i]=<span class="string">&#x27;R&#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	sm=n+m;k=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(;k&lt;=sm;)k&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">makerev</span>(k);</span><br><span class="line">	<span class="comment">//R</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;++i)<span class="keyword">if</span>(a[i]==<span class="string">&#x27;R&#x27;</span>)F1[i]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;++i)<span class="keyword">if</span>(b[i]==<span class="string">&#x27;R&#x27;</span>)G1[i]=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">FFT</span>(F1,k);</span><br><span class="line">	<span class="built_in">FFT</span>(G1,k);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;k;++i)F1[i]*=G1[i];</span><br><span class="line">	<span class="built_in">FFT</span>(F1,k);</span><br><span class="line">	<span class="built_in">reverse</span>(F1+<span class="number">1</span>,F1+k);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=sm;++i)A1[i]=(<span class="type">int</span>)(F1[i].<span class="built_in">real</span>()/(ld)(k)+<span class="number">0.5</span>);</span><br><span class="line">	<span class="comment">//P</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;++i)<span class="keyword">if</span>(a[i]==<span class="string">&#x27;P&#x27;</span>)F2[i]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;++i)<span class="keyword">if</span>(b[i]==<span class="string">&#x27;P&#x27;</span>)G2[i]=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">FFT</span>(F2,k);</span><br><span class="line">	<span class="built_in">FFT</span>(G2,k);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;k;++i)F2[i]*=G2[i];</span><br><span class="line">	<span class="built_in">FFT</span>(F2,k);</span><br><span class="line">	<span class="built_in">reverse</span>(F2+<span class="number">1</span>,F2+k);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=sm;++i)A2[i]=(<span class="type">int</span>)(F2[i].<span class="built_in">real</span>()/(ld)(k)+<span class="number">0.5</span>);</span><br><span class="line">	<span class="comment">//S</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;++i)<span class="keyword">if</span>(a[i]==<span class="string">&#x27;S&#x27;</span>)F3[i]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;++i)<span class="keyword">if</span>(b[i]==<span class="string">&#x27;S&#x27;</span>)G3[i]=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">FFT</span>(F3,k);</span><br><span class="line">	<span class="built_in">FFT</span>(G3,k);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;k;++i)F3[i]*=G3[i];</span><br><span class="line">	<span class="built_in">FFT</span>(F3,k);</span><br><span class="line">	<span class="built_in">reverse</span>(F3+<span class="number">1</span>,F3+k);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=sm;++i)A3[i]=(<span class="type">int</span>)(F3[i].<span class="built_in">real</span>()/(ld)(k)+<span class="number">0.5</span>);</span><br><span class="line">	<span class="comment">//sum</span></span><br><span class="line">	<span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//	for(int i=0;i&lt;=sm;++i)cerr&lt;&lt;A1[i]+A2[i]+A3[i]&lt;&lt;&#x27; &#x27;;cerr&lt;&lt;&#x27;\n&#x27;;</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=m<span class="number">-1</span>;i&lt;=sm;++i)ans=<span class="built_in">max</span>(ans,A1[i]+A2[i]+A3[i]);</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-I-Slot-Machines"><a href="#Problem-I-Slot-Machines" class="headerlink" title="Problem I.Slot Machines"></a>Problem I.Slot Machines</h2><p>通过队伍数：49/107</p>
<p>题目大意：</p>
<p>给你一个长度为 $n$ 的数组 $a$。</p>
<p>你需要找到一对 $k,p$(下标从 $1$ 开始)，满足 $a_{k+1}\dots a_n$ 满足 $p$ 个一循环（最后一轮可以不满）。</p>
<p>现在需要 $p$ 最小。在 $p$ 最小的前提下使得 $k$ 最小。</p>
<p>题解：</p>
<p>我们知道有个东西叫做 $kmp$</p>
<p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P3375">P3375 【模板】KMP字符串匹配
</a></p>
<p>它是干什么用的？</p>
<p>求 $border$: </p>
<p>定义一个字符串 $s$ 的 $border$ 为 $s$ 的一个非 $s$ 本身的子串 $t$，满足 $t$ 既是 $s$ 的前缀，又是 $s$ 的后缀。</p>
<p>然后题目怎么转化到这玩意上来？</p>
<p><strong>翻转。</strong></p>
<p>我们可以把数组 $a$ 转过来。</p>
<p>然后就是前缀重复了。</p>
<p>接着随便搞搞就行了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mxn=<span class="number">1e6</span>+<span class="number">6</span>;</span><br><span class="line"><span class="type">int</span> a[mxn],nxt[mxn],n;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">kmp</span><span class="params">()</span></span>&#123;</span><br><span class="line">	nxt[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,j=<span class="number">-1</span>;i&lt;=n;)&#123;</span><br><span class="line">		<span class="keyword">if</span>(j==<span class="number">-1</span> <span class="keyword">or</span> a[i]==a[j])nxt[++i]=++j;</span><br><span class="line">		<span class="keyword">else</span> j=nxt[j];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;++i)cin&gt;&gt;a[i];</span><br><span class="line">	<span class="built_in">reverse</span>(a,a+n);<span class="comment">//很显然后面的一定呈循环状 倒过来处理就很方便 </span></span><br><span class="line">	<span class="built_in">kmp</span>();</span><br><span class="line">	<span class="type">int</span> ak=n<span class="number">-1</span>,ap=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;++i)&#123;    <span class="comment">//枚举k</span></span><br><span class="line">		<span class="type">int</span> tp=i-nxt[i],tk=n-i;</span><br><span class="line">		<span class="keyword">if</span>(tp+tk&lt;ak+ap)ak=tk,ap=tp;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(tp+tk==ap+ak <span class="keyword">and</span> tp&lt;ap)ap=tp;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ak&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;ap&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-J-Strongly-Matchable"><a href="#Problem-J-Strongly-Matchable" class="headerlink" title="Problem J.Strongly Matchable"></a>Problem J.Strongly Matchable</h2><p>通过队伍数：10/107</p>
<p>题目大意：</p>
<p>给你一张 $n \le 100$ 个点的无向图，保证 $n$ 为偶数。</p>
<p>定义一种染色方案为，从中任意选出 $\frac{n}{2}$ 个点染黑，另外 $\frac{n}{2}$ 个点染白。</p>
<p>定义一个图是“强完美匹配的”，当且仅当，对于所有的染色方案，白点集和黑点集都存在完美匹配。</p>
<p>你需要求出给你的这张图是不是“强完美匹配的”。</p>
<p>题解：</p>
<p>霍尔定理：对于黑点集的所有子集 $U$，存在完美匹配的条件是它的邻集 $\delta(U)$ 中的白点数量要 $\geq |U|$</p>
<p>由于要求任意染色都满足要求，所以我们直接考虑最坏情况：</p>
<p>对于一个黑点子集 $U$，剩下的所有黑点都在 $\delta(U)$ 中。</p>
<p>那么 $\delta(U)$ 中的白点数量就是 $|\delta(U)|-(\frac{n}{2}-|U|)$</p>
<p>所以不合法的情况就是 $|\delta(U)|-(\frac{n}{2}-|U|) &lt; |U|$</p>
<p>$|\delta(U)|-\frac{n}{2}&lt;|U|-|U|$</p>
<p>得到 $|\delta(U)|&lt;\frac{n}{2}$</p>
<p><del>接下来就套路了？</del></p>
<p>设原点集为 $V$</p>
<p>令 $U’$ 为 $V \backslash U \backslash \delta(U) $</p>
<p>这个 $\delta(U)$ 就相当于 $U$ 和 $U’$ 的点割。</p>
<p>于是我们就可以对原图中于任意两个点 $x$ 和 $y$，以 $x$ 为源点，$y$ 为汇点，跑一遍最小点割，如果 $ &lt; \frac{n}{2}$ 就是无解。</p>
<p>附：实际代码在比赛时 TLE 了一次，但神仙队友加了个随机化（对于每个源点随机只跑 $10$ 个汇点）就 AC 了/bx/bx/bx</p>
<p>Code by <a target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/36215">神仙队友 miao22:</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_V=<span class="number">203</span>,INF=<span class="number">19260817</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">	<span class="type">int</span> to,cap,rev;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;edge&gt; G[MAX_V];</span><br><span class="line"><span class="type">int</span> dist[MAX_V],prevv[MAX_V],preve[MAX_V],V;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> from,<span class="type">int</span> to,<span class="type">int</span> cap)</span></span>&#123;</span><br><span class="line">	G[from].<span class="built_in">push_back</span>((edge)&#123;to,cap,G[to].<span class="built_in">size</span>()&#125;);</span><br><span class="line">	G[to].<span class="built_in">push_back</span>((edge)&#123;from,<span class="number">0</span>,G[from].<span class="built_in">size</span>()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge2</span><span class="params">(<span class="type">int</span> from,<span class="type">int</span> to,<span class="type">int</span> cap)</span></span>&#123;</span><br><span class="line">	G[from].<span class="built_in">push_back</span>((edge)&#123;to,cap,G[to].<span class="built_in">size</span>()&#125;);</span><br><span class="line">	G[to].<span class="built_in">push_back</span>((edge)&#123;from,cap,G[from].<span class="built_in">size</span>()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;V;i++)G[i].<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> q[MAX_V];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max_flow</span><span class="params">(<span class="type">int</span> s,<span class="type">int</span> t)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;V;i++)dist[i]=<span class="number">19260817</span>;</span><br><span class="line">		dist[s]=<span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> nws=<span class="number">0</span>,nwt=<span class="number">0</span>;q[<span class="number">0</span>]=s;</span><br><span class="line">		<span class="keyword">while</span>(nws&lt;=nwt)&#123;</span><br><span class="line">			<span class="type">int</span> nw=q[nws++];</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;G[nw].<span class="built_in">size</span>();i++)</span><br><span class="line">				<span class="keyword">if</span>(G[nw][i].cap&amp;&amp;dist[G[nw][i].to]==<span class="number">19260817</span>)&#123;</span><br><span class="line">					dist[G[nw][i].to]=dist[nw]+<span class="number">1</span>;</span><br><span class="line">					q[++nwt]=G[nw][i].to;</span><br><span class="line">					prevv[q[nwt]]=nw;</span><br><span class="line">					preve[q[nwt]]=i;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(dist[t]==INF)</span><br><span class="line">			<span class="keyword">return</span> res;</span><br><span class="line">		<span class="type">int</span> d=<span class="number">19260817</span>; </span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> v=t;v!=s;v=prevv[v])</span><br><span class="line">			d=<span class="built_in">min</span>(d,G[prevv[v]][preve[v]].cap);</span><br><span class="line">		res+=d;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> v=t;v!=s;v=prevv[v])&#123;</span><br><span class="line">			edge &amp;e=G[prevv[v]][preve[v]];</span><br><span class="line">			e.cap-=d;</span><br><span class="line">			G[v][e.rev].cap+=d;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;<span class="type">int</span> n,m,a[<span class="number">5053</span>],b[<span class="number">5053</span>]; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,a+i,b+i);</span><br><span class="line">		a[i]--;b[i]--;</span><br><span class="line">	&#125;V=<span class="number">2</span>*n;</span><br><span class="line">	<span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">NULL</span>)); </span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="type">int</span> j,cnt=<span class="number">10</span>;</span><br><span class="line">		<span class="keyword">while</span>(cnt--)&#123;</span><br><span class="line">			j=<span class="built_in">rand</span>()%(n-i)+i;</span><br><span class="line">			<span class="built_in">init</span>();</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;n;k++)</span><br><span class="line">				<span class="built_in">add_edge</span>(k,k+n,<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;m;k++)&#123;</span><br><span class="line">				<span class="built_in">add_edge</span>(a[k]+n,b[k],<span class="number">233</span>);</span><br><span class="line">				<span class="built_in">add_edge</span>(b[k]+n,a[k],<span class="number">233</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">max_flow</span>(i+n,j)&lt;n/<span class="number">2</span>)&#123;</span><br><span class="line">				cout&lt;&lt;<span class="number">-1</span>;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;cout&lt;&lt;<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-K-Untangling-Chain"><a href="#Problem-K-Untangling-Chain" class="headerlink" title="Problem K.Untangling Chain"></a>Problem K.Untangling Chain</h2><p>通过队伍数：36/107</p>
<p>题目大意：</p>
<p>在二维平面上，从 $(0,0)$ 出发（开始时向右走），向前走一段距离（整数），然后向左转或向右转，重复若干次。给出路径，你需要改变每一次走的距离（不能改变转向），使得路径不相交。</p>
<p>你还需要输出一种方案。</p>
<p>题解：</p>
<p>神仙队友：这是诈骗题，秒了! $         $ orz</p>
<p><del>的确挺诈骗的</del></p>
<p>他只是说要不相交，没有要求改动最小</p>
<p>所以我们可以尝试螺旋<del>走位</del>。</p>
<p>记录当前的$x_{min},y_{min},x_{max},y_{max}$，然后走到 $x_{min}-1,y_{min}-1,x_{max}+1,y_{max}+1$即可。</p>
<p>Code by <a target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/36215">miao22</a>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> c[<span class="number">4</span>]=&#123;<span class="string">&#x27;R&#x27;</span>,<span class="string">&#x27;U&#x27;</span>,<span class="string">&#x27;L&#x27;</span>,<span class="string">&#x27;D&#x27;</span>&#125;;</span><br><span class="line"><span class="type">int</span> x[<span class="number">2</span>],y[<span class="number">2</span>],nwx,nwy,n,pt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">while</span>(n--)&#123;</span><br><span class="line">		<span class="type">int</span> tmp;cin&gt;&gt;tmp&gt;&gt;tmp;</span><br><span class="line">		<span class="keyword">if</span>(c[pt]==<span class="string">&#x27;U&#x27;</span>)&#123;</span><br><span class="line">			cout&lt;&lt;y[<span class="number">1</span>]+<span class="number">1</span>-nwy&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">			nwy=y[<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">			y[<span class="number">1</span>]=nwy;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(c[pt]==<span class="string">&#x27;L&#x27;</span>)&#123;</span><br><span class="line">			cout&lt;&lt;nwx-x[<span class="number">0</span>]+<span class="number">1</span>&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">			nwx=x[<span class="number">0</span>]<span class="number">-1</span>;</span><br><span class="line">			x[<span class="number">0</span>]=nwx;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(c[pt]==<span class="string">&#x27;D&#x27;</span>)&#123;</span><br><span class="line">			cout&lt;&lt;nwy-y[<span class="number">0</span>]+<span class="number">1</span>&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">			nwy=y[<span class="number">0</span>]<span class="number">-1</span>;</span><br><span class="line">			y[<span class="number">0</span>]=nwy;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(c[pt]==<span class="string">&#x27;R&#x27;</span>)&#123;</span><br><span class="line">			cout&lt;&lt;x[<span class="number">1</span>]+<span class="number">1</span>-nwx&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">			nwx=x[<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">			x[<span class="number">1</span>]=nwx;</span><br><span class="line">		&#125;</span><br><span class="line">		pt=(pt+tmp+<span class="number">4</span>)%<span class="number">4</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-L-Vacation-Plans"><a href="#Problem-L-Vacation-Plans" class="headerlink" title="Problem L.Vacation Plans"></a>Problem L.Vacation Plans</h2><p>通过队伍数：14/107</p>
<p>题目大意：</p>
<p>有 $n\le 3$ 张带权有向图（不是同一张图），每张图的起点都是 $1$，终点为 $to_i   (1 \le i \le n)$。第 $i$ 张图的节点数 $c_i \le 50$。</p>
<p>有 $n$ 个人。第 $i$ 个人在第 $i$ 个图上。所有人同时出发，要求同时结束。</p>
<p>假设当前一个人在$u$。每一次可以沿着一条 $\{u_i,v_i,w_i\}$ 的边(从$u_i$ 走到 $v_i$ 代价 $w_i$) 走到 $v_i$，或者花费 $t_u$ 的代价留在原地，均花费时间 $1$。</p>
<p>问你最小的代价使得在所有人同时出发的前提下同时到达终点。</p>
<p>题解：</p>
<p>留在原地相当于连一条 $\{i,i,t_i\}$ 的边。</p>
<p>按照时间分层dp。</p>
<p>我们对每个图分开来考虑。</p>
<p>令 $dp_{g,t,i}$ 表示在第 $g$ 张图，经过了 $t$ 份时间，走到了 $i$ 号节点的最小代价。</p>
<p>按照拓扑序直接暴力转移即可。</p>
<p>然后统计答案。</p>
<p>枚举一个同时到达终点的时间 $d$。可以感性证明 $d \le \prod\limits_{i=1}^{n}v_i \le 50^3=125000$</p>
<p>这一时刻的答案就是 $\sum\limits_{i=1}^{n} dp_{i,d,to_g}$</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mxn=<span class="number">55</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> lim=mxn*mxn*mxn;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">graph</span>&#123;</span><br><span class="line">	vector&lt;pair&lt;<span class="type">int</span>,ll&gt; &gt;g[mxn];</span><br><span class="line">	ll dp[lim][mxn],n,m,to;</span><br><span class="line">	<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">		cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">		<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="built_in">sizeof</span>(g));</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,w;i&lt;=n;++i)cin&gt;&gt;w,g[i].<span class="built_in">push_back</span>(<span class="built_in">mp</span>(i,w));</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>,u,v;i&lt;=m;++i)&#123;</span><br><span class="line">			ll w;</span><br><span class="line">			cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">			g[u].<span class="built_in">push_back</span>(<span class="built_in">mp</span>(v,w));</span><br><span class="line">		&#125;</span><br><span class="line">		cin&gt;&gt;to;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">go</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;lim;++i)<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=n;++j)dp[i][j]=<span class="number">1145141919810</span>;</span><br><span class="line">		dp[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> t=<span class="number">0</span>;t&lt;lim;++t)<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="keyword">for</span>(pair&lt;<span class="type">int</span>,ll&gt;p:g[i])dp[t+<span class="number">1</span>][p.first]=<span class="built_in">min</span>(dp[t+<span class="number">1</span>][p.first],dp[t][i]+p.second);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">inline</span> ll <span class="title">get</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;<span class="keyword">return</span> dp[x][to];&#125;</span><br><span class="line">&#125;G[<span class="number">4</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> cc;cin&gt;&gt;cc;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cc;++i)G[i].<span class="built_in">read</span>(),G[i].<span class="built_in">go</span>();</span><br><span class="line">	ll ans=<span class="number">1145141919810</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> t=<span class="number">0</span>;t&lt;lim;++t)&#123;</span><br><span class="line">		ll tmp=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cc;++i)tmp+=G[i].<span class="built_in">get</span>(t);</span><br><span class="line">		ans=<span class="built_in">min</span>(ans,tmp);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> T;T=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//	cin&gt;&gt;T;</span></span><br><span class="line">	<span class="keyword">for</span>(;T--;)<span class="built_in">solve</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%A2%98%E8%A7%A3/" rel="tag"># 题解</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
            </div>
            <div class="post-nav-item">
                <a href="/2022/02/13/generals%E7%B2%BE%E5%BD%A9%E5%9B%9E%E6%94%BE/" rel="next" title="generals ���ʶԾֻط�">
                  generals ���ʶԾֻط� <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">paulzrm</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body>
</html>
